<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>上传游戏 - BUAA游戏网</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/form.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="../index.html"><div class="logo">BUAA小游戏</div></a>
            <ul class="nav-links">
                <li><a href="/">首页</a></li>
                <li><a href="/games.html">游戏列表</a></li>
                <li><a href="/upload.html">上传游戏</a></li>
                <li><a href="/creator.html">开发者计划</a></li>
            </ul>
            <div class="auth-buttons">
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
        <div class="sidebar">
            <ul>
                <li><a href="/">首页</a></li>
                <li><a href="/games.html">游戏列表</a></li>
                <li><a href="/upload.html">上传游戏</a></li>
                <li><a href="/creator.html">开发者</a></li>
            </ul>
            <div class="auth-buttons-sidebar">
            </div>
        </div>
        <div class="overlay"></div>
    </header>

    <section class="form-section">
        <form id="uploadForm" enctype="multipart/form-data">
            <h2>上传您的游戏</h2>
            <label>游戏名称（必填）：</label>
            <input type="text" name="gameName" required>
            <label>展示图片链接（必填）：</label>
            <input type="text" name="imageLink" required>
            <label>游戏使用说明链接（可选）：</label>
            <input type="text" name="instructionLink">
            <label>游戏 ZIP 文件：</label>
            <input type="file" name="gameFile" accept=".zip" required>
            <label>选择游戏分类：</label>
            <select name="category" required>
                <option value="">请选择分类</option>
                <option value="策略">策略</option>
                <option value="经营">经营</option>
                <option value="动作">动作</option>
                <option value="休闲">休闲</option>
                <option value="体育">体育</option>
                <option value="多人">多人</option>
                <option value="其他">其他</option>
            </select>

            <label>捐赠收款码图片链接（可选）：</label>
            <input type="text" name="donationLink" placeholder="请输入图片链接">

            <button type="submit">上传</button>
        </form>
    </section>

    <footer>
        <p>&copy; 2024 BUAA. 版权所有.</p>
    </footer>

    <script src="js/scripts.js"></script>
    <script>
        fetch('/check_login')
            .then(response => response.json())
            .then(data => {
                if (!data.loggedIn) {
                    alert('请先登录');
                    location.href = '/login.html';
                } else if (data.developerStatus !== '已批准') {
                    alert('您还不是游戏开发者哦');
                    location.href = '/creator.html';
                }
            });
    </script>
</body>
</html>
